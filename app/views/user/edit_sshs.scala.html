@**
* Yobi, Project Hosting SW
*
* Copyright 2015 NAVER Corp.
* http://yobi.io
*
* @author Kiseong Park
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
**@
@(userForm: play.data.Form[User], user:User)

@import helper._
@import utils.TemplateHelper._

@siteLayout(user.loginId, utils.MenuType.USER) {
<div class="site-breadcrumb-outer">
  <div class="site-breadcrumb-inner">
    <h3>@Messages("userinfo.accountSetting")</h3>
  </div>
</div>
<div class="page-wrap-outer">
  <div class="page-wrap">
    @partial_edit_tabmenu("sshs")

    <form action="@routes.UserApp.addSshKey" method="post" class="pull-left" style="width:50%;">
      <dl>
        <dt>@Messages("user.sshKey.keyTitle")</dt>
        <dd>
          <input type="text" name="comment" class="text uname" style="width:400px;" />
        </dd>
        <dt>@Messages("user.sshKey.key")</dt>
        <dd>
          <textarea name="sshKey" style="width:90%; height:100px;"></textarea>
        </dd>
        <dd>
          <button type="submit" class="ybtn ybtn-success">@Messages("button.add")</button>
        </dd>
        <dd>@Messages("sshKeys.description1")</dd>
      </dl>
    </form>

    <table class="pull-left" style="border-left:1px solid #ddd; width:50%; box-sizing: border-box;">
      @for(key <- user.sshKeys){
      <tr>
        <td>
          <ul style="list-style:none; padding-left:40px;">
            <li>
              <strong class="ml10">@key.comment</strong>
            </li>
            <li>
              <span class="label-head ml10">@key.fingerPrint</span>
            </li>
            <li>
              <span class="ml10">
                @Messages("user.sshKey.addedOn") @key.getRegister â€• @if(key.isKeyUsed){ @Messages("user.sshKey.lastUsedOn") @key.getLastConnected} else {@Messages("user.sshKey.neverUsed")}
              </span>
            </li>
          </ul>
        </td>
        <td style="text-align:right; vertical-align: middle;">
          <button type="button" data-request-method="delete" data-request-uri="@routes.UserApp.deleteSshKey(key.sshKey)" class="ybtn ybtn-small ybtn-danger">
            @Messages("button.delete")
          </button>
        </td>
      </tr>
      <tr>
        <td colspan="2">
          <hr />
        </td>
      </tr>
      } 
    </table>
  </div>
</div>
<script type="text/javascript">
    $(function(){
        $yobi.loadModule("user.Setting");
    });
</script>
}
